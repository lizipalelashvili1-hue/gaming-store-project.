// 1. API - áƒ—áƒáƒ›áƒáƒ¨áƒ”áƒ‘áƒ˜áƒ¡ áƒ¬áƒáƒ›áƒáƒ¦áƒ”áƒ‘áƒ áƒ“áƒ áƒ’áƒáƒ›áƒáƒ©áƒ”áƒœáƒ (Axios)
async function fetchGames() {
    try {
        const response = await axios.get('https://jsonplaceholder.typicode.com/posts?_limit=3');
        const container = document.getElementById('gamesContainer');
        
        // áƒ¡áƒáƒ˜áƒ›áƒ”áƒ“áƒ áƒ¡áƒ£áƒ áƒáƒ—áƒ”áƒ‘áƒ˜áƒ¡ áƒšáƒ˜áƒœáƒ™áƒ”áƒ‘áƒ˜ áƒ—áƒáƒ›áƒáƒ¨áƒ”áƒ‘áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡
        const images = [
            "https://images.unsplash.com/photo-1542751371-adc38448a05e?w=400",
            "https://images.unsplash.com/photo-1552820728-8b83bb6b773f?w=400",
            "https://images.unsplash.com/photo-1511512578047-dfb367046420?w=400"
        ];
        
        // áƒ•áƒáƒ¡áƒ£áƒ¤áƒ—áƒáƒ•áƒ”áƒ‘áƒ— áƒ™áƒáƒœáƒ¢áƒ”áƒ˜áƒœáƒ”áƒ áƒ¡ áƒ“áƒ áƒ•áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒ— áƒ‘áƒáƒ áƒáƒ—áƒ”áƒ‘áƒ¡
        container.innerHTML = response.data.map((item, index) => `
            <div class="game-card animate__animated animate__fadeInUp">
                <img src="${images[index]}" alt="Game Image">
                <h3>áƒáƒ áƒáƒ“áƒ£áƒ¥áƒ¢áƒ˜ ${index + 1}</h3>
                <p>${item.title.slice(0, 30)}...</p>
                <button class="btn-submit" style="margin-top: 15px; padding: 8px 20px;">áƒœáƒáƒ®áƒ•áƒ</button>
            </div>
        `).join('');
    } catch (error) {
        console.error("API Error:", error);
        document.getElementById('gamesContainer').innerHTML = "<p>áƒ›áƒáƒœáƒáƒªáƒ”áƒ›áƒ”áƒ‘áƒ˜áƒ¡ áƒ©áƒáƒ¢áƒ•áƒ˜áƒ áƒ—áƒ•áƒ áƒ•áƒ”áƒ  áƒ›áƒáƒ®áƒ”áƒ áƒ®áƒ“áƒ.</p>";
    }
}
fetchGames();

// 2. áƒ‘áƒ£áƒ áƒ’áƒ”áƒ  áƒ›áƒ”áƒœáƒ˜áƒ£áƒ¡ áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒáƒœáƒáƒšáƒ˜
const burger = document.getElementById('burgerMenu');
const nav = document.getElementById('navMenu');

if (burger) {
    burger.onclick = () => {
        nav.classList.toggle('active');
        // áƒáƒœáƒ˜áƒ›áƒáƒªáƒ˜áƒ áƒ‘áƒ£áƒ áƒ’áƒ”áƒ áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ (áƒ¡áƒ£áƒ áƒ•áƒ˜áƒšáƒ˜áƒ¡áƒáƒ›áƒ”áƒ‘áƒ )
        burger.classList.toggle('toggle');
    };
}

// 3. áƒ¤áƒáƒ áƒ›áƒ˜áƒ¡ áƒ•áƒáƒšáƒ˜áƒ“áƒáƒªáƒ˜áƒ (Regex & Toggle Password)
const contactForm = document.getElementById('contactForm');
const passInput = document.getElementById('password');
const togglePass = document.getElementById('togglePass');

// áƒáƒáƒ áƒáƒšáƒ˜áƒ¡ áƒ’áƒáƒ›áƒáƒ©áƒ”áƒœáƒ/áƒ“áƒáƒ›áƒáƒšáƒ•áƒ
if (togglePass) {
    togglePass.onclick = () => {
        passInput.type = passInput.type === 'password' ? 'text' : 'password';
        togglePass.innerText = passInput.type === 'password' ? 'ğŸ‘ï¸' : 'ğŸ™ˆ';
    };
}

if (contactForm) {
    contactForm.onsubmit = function(event) {
        event.preventDefault();
        
        const username = document.getElementById('username').value.trim();
        const email = document.getElementById('email').value.trim();
        const password = passInput.value.trim();
        const errorDisplay = document.getElementById('formError');
        
        // Regex áƒ˜áƒ›áƒ”áƒ˜áƒšáƒ˜áƒ¡ áƒ¤áƒáƒ áƒ›áƒáƒ¢áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

        if (!username || !email || !password) {
            errorDisplay.innerText = "âŒ áƒ¨áƒ”áƒáƒ•áƒ¡áƒ”áƒ— áƒ§áƒ•áƒ”áƒšáƒ áƒ•áƒ”áƒšáƒ˜!";
            errorDisplay.style.color = "#ef4444";
        } else if (!emailPattern.test(email)) {
            errorDisplay.innerText = "âŒ áƒ”áƒš-áƒ¤áƒáƒ¡áƒ¢áƒ˜áƒ¡ áƒ¤áƒáƒ áƒ›áƒáƒ¢áƒ˜ áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜áƒ!";
            errorDisplay.style.color = "#ef4444";
        } else if (password.length < 6) {
            errorDisplay.innerText = "âŒ áƒáƒáƒ áƒáƒšáƒ˜ áƒ£áƒœáƒ“áƒ áƒ˜áƒ§áƒáƒ¡ áƒ›áƒ˜áƒœ. 6 áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒ!";
            errorDisplay.style.color = "#ef4444";
        } else {
            errorDisplay.innerText = "âœ… áƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒáƒªáƒ˜áƒ áƒ¬áƒáƒ áƒ›áƒáƒ¢áƒ”áƒ‘áƒ£áƒšáƒ˜áƒ!";
            errorDisplay.style.color = "#38bdf8";
            contactForm.reset();
        }
    };
}

// 4. Cookies (LocalStorage)
const cookieBar = document.getElementById('cookieBar');
const acceptBtn = document.getElementById('acceptCookies');

if (cookieBar && !localStorage.getItem('userAcceptedCookies')) {
    setTimeout(() => {
        cookieBar.style.display = 'flex';
    }, 2000); // áƒ’áƒáƒ›áƒáƒ©áƒœáƒ“áƒ”áƒ¡ 2 áƒ¬áƒáƒ›áƒ¨áƒ˜
}

if (acceptBtn) {
    acceptBtn.onclick = () => {
        localStorage.setItem('userAcceptedCookies', 'true');
        cookieBar.style.display = 'none';
    };
}

// 5. Header-áƒ˜áƒ¡ áƒ”áƒ¤áƒ”áƒ¥áƒ¢áƒ˜ áƒ“áƒ Scroll Top áƒ¦áƒ˜áƒšáƒáƒ™áƒ˜
const scrollTopBtn = document.getElementById('scrollTop');

window.onscroll = () => {
    const header = document.getElementById('mainHeader');
    
    // Header-áƒ˜áƒ¡ áƒ’áƒáƒ›áƒ£áƒ¥áƒ”áƒ‘áƒ áƒ¡áƒ¥áƒ áƒáƒšáƒ˜áƒ¡áƒáƒ¡
    if (window.scrollY > 50) {
        header.style.background = "rgba(15, 23, 42, 0.98)";
        header.style.boxShadow = "0 4px 20px rgba(0,0,0,0.4)";
    } else {
        header.style.background = "rgba(15, 23, 42, 0.8)";
        header.style.boxShadow = "none";
    }

    // Scroll Top áƒ¦áƒ˜áƒšáƒáƒ™áƒ˜áƒ¡ áƒ’áƒáƒ›áƒáƒ©áƒ”áƒœáƒ
    if (window.scrollY > 400) {
        scrollTopBtn.style.display = "block";
    } else {
        scrollTopBtn.style.display = "none";
    }
};

// áƒ–áƒ”áƒ›áƒáƒ— áƒáƒ¡áƒ•áƒšáƒ˜áƒ¡ áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ
if (scrollTopBtn) {
    scrollTopBtn.onclick = () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    };
}
